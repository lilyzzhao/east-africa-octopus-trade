---
title: "data_package"
author: "Lily Zhao"
date: "12/11/2019"
output: html_document
---



```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
```


```{r}
data<-read_csv("data/Middlemen_Value_Chain.csv") %>% 
  clean_names() 
mutate_all(data, funs(na_if(.,"")))
write_csv(data, "Middlemen_Price_Quantity.csv")
```

# every dataset is a different resource
# then add metadata to describe collection of data resources
# describe what licenses are attached to data resources
# write a schema with having to get into the details of it
# the creator populates the schema for you

```{r}
library(datapackage.r)
dataPackage <- Package.load()
dataPackage$descriptor['name'] <- 'octopus-trade-middlemen'
dataPackage$descriptor['title'] <- 'Octopus Value Chain Data'
# commit the changes to Package class
dataPackage$commit()
filepath <- read.csv("data/octopusmiddlemen.csv")

```


We can guess at our CSV’s schema by using infer from the Table Schema package. We pass directly the remote link to the infer function, the result of which is an inferred schema
```{r}
schema <- tableschema.r::infer(filepath) ##inferring schema doens't work in R but does on the gui and in python. 

#error message: when trying to use infer schema: ‘-’ not meaningful for factorsthe condition has length > 1 and only the first element will be usedError in if (!headersRow) break : missing value where TRUE/FALSE needed



```
